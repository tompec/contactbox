!function(){function t(){var t=document.getElementById("contactbox__email");t.type="email",t.className="form-input"}function e(t,e){for(var n in t)if(e.hasOwnProperty(n))if("object"==typeof t[n]&&null!==t[n])for(subprop in t[n])e[n].hasOwnProperty(subprop)&&(t[n][subprop]=e[n][subprop]);else t[n]=e[n];return t}function n(){var t;t=document.createDocumentFragment(),this.box=document.createElement("div"),this.box.className="contactbox downsized "+this.options.position,this.button=document.createElement("div"),this.button.className="contactbox__button",this.box.appendChild(this.button),this.link=document.createElement("a"),this.link.title=this.options.language.title,this.link.href="#",this.link.id="contactbox__button-link",this.button.appendChild(this.link);var e=document.createElement("span");e.innerHTML=this.options.language.title,e.className="contactbox__button-title",this.link.appendChild(e);var n=document.createElement("span");n.innerHTML='<i class="icon-comment"></i>',n.className="contactbox__button-icon",this.link.appendChild(n),this.content=document.createElement("div"),this.content.className="contactbox__content",this.box.appendChild(this.content),this.header=document.createElement("div"),this.header.className="contactbox__header",this.content.appendChild(this.header);var o=document.createElement("div");if(o.className="contactbox__header-title",o.innerHTML=this.options.language.title,this.header.appendChild(o),this.cross=document.createElement("a"),this.cross.id="contactbox__header-cross",this.cross.href="#",this.cross.innerHTML='<icon class="icon-cross"></i>',this.header.appendChild(this.cross),null!==this.options.description){var i=document.createElement("div");i.className="contactbox__description",i.innerHTML=this.options.description,this.content.appendChild(i)}this.form=document.createElement("form"),this.form.method="post",this.form.action=this.options.endpoint,this.form.className="contactbox__form";var s=document.createElement("input");s.placeholder=this.options.language.emailPlaceholder,s.name="email",s.id="contactbox__email",null!==this.options.email?(s.type="hidden",s.value=this.options.email):(s.className="form-input",s.type="email");var a=document.createElement("textarea");a.className="form-input",a.placeholder=this.options.language.messagePlaceholder,a.rows="7",a.name="message",a.id="contactbox__message";var l=document.createElement("input");l.type="submit",l.value=this.options.language.buttonText;var c=document.createElement("div");c.className="contactbox__error-msg";var r=document.createElement("div");r.className="contactbox__error-msg";var d=document.createElement("div");d.id="contactbox__success-msg",this.form.appendChild(s),this.form.appendChild(c),this.form.appendChild(a),this.form.appendChild(r),this.form.appendChild(d),this.form.appendChild(l),this.content.appendChild(this.form),t.appendChild(this.box),null!==this.options.color&&(this.link.style.color=this.options.color,this.header.style.color=this.options.color,this.cross.style.color=this.options.color,l.style.backgroundColor=this.options.color,l.style.border="1px solid "+this.options.color),document.body.appendChild(t)}function o(t){for(var e=document.getElementsByClassName(t),n=0;n<e.length;n++)"DIV"==e[n].tagName?e[n].innerHTML="":e[n].value=""}this.ContactBox=function(){this.box=null,this.button=null,this.link=null,this.content=null,this.header=null,this.cross=null,this.form=null;var t={endpoint:"submit.php",position:"right",email:null,token:{name:null,value:null},language:{title:"Send us a message",emailPlaceholder:"Your email",messagePlaceholder:"Your message",emptyEmail:"Please enter your email",emptyMessage:"Please enter your message",invalidEmail:"Please enter a valid email",successMsg:"Thanks, your message has been sent!",buttonText:"Send your message"},color:null,description:null};arguments[0]&&"object"==typeof arguments[0]&&(this.options=e(t,arguments[0])),this.generate()},ContactBox.prototype.generate=function(){var t=this;n.call(this),this.link.addEventListener("click",function(e){e.preventDefault(),t.content.classList.toggle("active"),t.box.classList.toggle("downsized")}),this.cross.addEventListener("click",function(e){e.preventDefault(),t.content.classList.toggle("active"),t.box.classList.toggle("downsized")}),this.form.addEventListener("submit",function(e){e.preventDefault();var n=document.getElementById("contactbox__email"),i=document.getElementById("contactbox__message");if(o("contactbox__error-msg"),0==t.validate(n,i))return!1;t.request(n.value,i.value)})},ContactBox.prototype.toggle=function(){this.content.classList.toggle("active"),this.box.classList.toggle("downsized")},ContactBox.prototype.request=function(t,e){var n=this,i=new XMLHttpRequest;i.open("POST",this.options.endpoint),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onload=function(){200===i.status?(o("form-input"),document.getElementById("contactbox__success-msg").innerHTML=n.options.language.successMsg):alert("An error occured, please try again later")},i.send(encodeURI("email="+t+"&message="+e+"&"+n.options.token.name+"="+n.options.token.value+"&current_page="+window.location.href))},ContactBox.prototype.validate=function(e,n){var o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return""==e.value?(e.nextSibling.innerHTML=this.options.language.emptyEmail,t(),!1):0==o.test(e.value)?(e.nextSibling.innerHTML=this.options.language.invalidEmail,t(),!1):""!=n.value||(n.nextSibling.innerHTML=this.options.language.emptyMessage,!1)}}();